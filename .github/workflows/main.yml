name: Deploy Dev to /dev

on:
  push:
    branches:
      - dev

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout dev branch
        uses: actions/checkout@v3
        with:
          ref: dev

      - name: Copy dev branch to /tmp/dev-auto-folder
        run: |
          sudo mkdir -p /tmp/dev-auto-folder
          sudo rsync -av --exclude='.*' ./ /tmp/dev-auto-folder

      - name: Checkout main branch
        uses: actions/checkout@v3
        with:
          ref: main

      - name: Copy /tmp/dev-auto-folder to main branch
        run: |
          sudo mkdir -p /dev-auto-folder
          sudo rsync -av /tmp/dev-auto-folder/ ./dev-auto-folder
          cd /dev-auto-folder
          echo "This is a test file"
          ls -la


      - name: Setup Git
        run: |
          git config --global user.namer "github.actions"
          git config --global user.emil "github.actions@users.noreply.github.com"



          
          
